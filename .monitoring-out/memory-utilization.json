{
  "displayName": "Cloud Run memory bytes > 80% of limit (5m)",
  "notificationChannels": ["projects/striped-history-467517-m3/notificationChannels/2969167425332044661"],
  "combiner": "OR",
  "conditions": [
    {
      "displayName": "Memory usage ratio MQL",
      "conditionMonitoringQueryLanguage": {
        "duration": "300s",
        "query": "mem = fetch cloud_run_revision | metric 'run.googleapis.com/container/instance/memory/bytes_used' | filter resource.service_name == 'smart-weather-mcp-server' && resource.location == 'asia-east1' | align mean(1m);\nlimit = fetch cloud_run_revision | metric 'run.googleapis.com/container/instance/memory/limit_bytes' | filter resource.service_name == 'smart-weather-mcp-server' && resource.location == 'asia-east1' | align mean(1m);\njoin mem, limit | value val(0) / val(1) | condition gt(val(), 0.8)"
      }
    }
  ]
}


